<div class="selion-content-div">
  <h1 id="getting-started-with-seLion" class="page-header">SeLion's Enhanced Grid</h1>

  <p class="lead">How to setup and use SeLion's Enhanced Grid.</p>

  <h2 id="introduction">Introduction</h2>
  <p>
    SeLion "client" is compatible with any <a href="https://code.google.com/p/selenium/wiki/Grid2">Selenium Grid2</a>,
      however we've added a few plug-ins to make managing the grid a bit easier.
  </p>
  <ol>
    <li>Auto Upgrade Nodes – Upgrade the Selenium, IE Driver, Chrome Driver,
        PhantomJS binary in each node without impacting existing test case execution.</li>
    <li>Force Restart Node – Forcibly restart the node without logging in to the
        physical node.</li>
    <li>Self-Healing – After execution of 25 test cases, the grid node will be recycled
        automatically to avoid unexpected issues. The number of test cases can be configured in the file
        <code>selion.grid.properties</code></li>
  </ol>

  <h2 id="prerequisites">Prerequisites</h2>
  <p>Install the following software on your grid machines:</p>
  <ol>
    <li><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html">Java
      JDK 1.7</a> and configure the JAVA_HOME environment variable in your system</li>
    <li><a href="#buildingSelion">SeLion compiled locally on your machine</a></li>
    <li>Copy the zip of SeLion's Enhanced Grid from <code>server/target/SeLion-Grid.zip</code> and extract it to your working folder
    </li>
  </ol>

  <h2 id="start-selion-grid">Start the Grid Hub</h2>
  <p>The grid hub serves as the central point. It will receive all test case requests from all
      clients and distribute them to the nodes registered with the grid.</p>
  <p>Open the command prompt and navigate to the location of the grid binary. Type in the following command:</p>
  <p>Windows</p>

  <pre><code class="language-sh">autobot_start_Grid.bat</code></pre>

  <p>Linux / Mac</p>

  <pre><code class="language-sh">sh autobot_start_Grid.sh</code></pre>

  <p>
      The grid hub will start up using the port <var>4444</var> by default. You can view it by connecting
      to <kbd>http://localhost:4444</kbd> with your preferred browswer.
  </p>

  <h2 id="start-selion-node">Start the Grid Node</h2>
  <p>The grid node will execute the test cases. Edit the file <code>autobot_start_Node.bat</code> or
      <code>autobot_start_Node.sh</code> to update the <var>HUB_URL</var> which represents SeLion Grid URL. Update the entry to use
      the local grid as below:</p>
  <pre><code class="language-sh">set HUB_URL=http://localhost:4444/grid/register</code></pre>
  <p>Open the command prompt and navigate to the Enhanced Grid folder. Execute the below command to
      start the node</p>
  <p>Windows</p>

  <pre><code class="language-sh">autobot_start_Node.bat</code></pre>

  <p>Linux / Mac</p>

  <pre><code class="language-sh">sh autobot_start_Node.sh</code></pre>

  <p>
      The grid node will start up using the port <var>5556</var> by default. Once it is started,
      it will register with the grid hub. You can view the node detail in the
      grid console at <kbd>http://localhost:4444/grid/console</kbd>
  </p>

  <p>The grid console should look like the following screen shot:</p>

  <div class="container">
      <img src="../images/grid-console.jpg" alt="View of the Grid console">
  </div>
  <br>
  <p>
      <b>Note:</b> The example shown uses the same machine for both the grid and the node. But you can spawn any
      number of nodes (one node per machine) and register them to a central grid hub.
  </p>

  <h2>Using the SeLion's Enhanced Grid to Run Tests</h2>
  <p>
      To learn how to create a web based test, refer to <a href="#getting-started">Getting
      Started With SeLion</a>.
  </p>
  <p>To run tests against the grid you spawned, update the following in your TestNG <samp>SampleSuite.xml</samp> file</p>
  <ol>
      <li><code>runLocally</code> - Indicates that SeLion should use a remote grid</li>
      <li><code>seleniumhost</code> - Points to the IP/machine name where the grid hub is running.</li>
  </ol>

  <pre data-src="../sample-files/selionGrid-sample1.xml" data-line="5-8" class="line-numbers"></pre>

  <p>Now run the following command in the project directory path from a command prompt.</p>

  <pre><code class="language-sh">mvn clean test -DsuiteXmlFile=src/test/resources/SampleSuite.xml</code></pre>

  <p>A browser window will open on the machine where your node is running.</p>

  <h2>Grid Management Console</h2>
  <p>
      If you have a large grid, managing the nodes can become tedious. The Enhanced Grid management console
      allows you to force restart and auto upgrade nodes. Navigate to the management console
      via the url <kbd>http://localhost:4444/grid/admin/LoginServlet</kbd> to manage
      the nodes. Default username and password is <kbd>admin</kbd>. Once logged in you will see this page:
  </p>

  <div class="container">
    <img src="../images/grid-management-console.jpg" alt="View of the SeLion Grid Management Console">
  </div>
</div>

<script src="../js/prismjs-min.js"></script>